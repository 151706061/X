function h(a){throw a;}var i=void 0,k=null;function n(a){return function(){return this[a]}}var o,p=this;function aa(){}
function ba(a){var b=typeof a;if(b=="object") {
  if(a){if(a instanceof Array) {
    return"array";
  } else if(a instanceof Object) {
    return b;
  }var c=Object.prototype.toString.call(a);if(c=="[object Window]") {
    return"object";
  }if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice")) {
    return"array";
  }if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call")) {
    return"function"}
  } else {
    return"null";
  }
} else if(b=="function"&&typeof a.call=="undefined") {
  return"object";
}return b}function r(a){return a!==i}function s(a){return a!=k}function ca(a){return ba(a)=="array"}function da(a){var b=ba(a);return b=="array"||b=="object"&&typeof a.length=="number"}function ea(a){return typeof a=="string"}function t(a){return typeof a=="number"}function fa(a){return ba(a)=="function"}function ga(a){a=ba(a);return a=="object"||a=="array"||a=="function"}function ha(a){return a[ia]||(a[ia]=++ja)}
var ia="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ja=0;function u(a,b){var c=a.split("."),d=p;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());) {!c.length&&r(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}}function w(a,b){function c(){}c.prototype=b.prototype;a.U=b.prototype;a.prototype=new c};function ka(a){if(!la.test(a)) {
  return a;
}a.indexOf("&")!=-1&&(a=a.replace(ma,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(na,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(oa,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(pa,"&quot;"));return a}var ma=/&/g,na=/</g,oa=/>/g,pa=/\"/g,la=/[&<>\"]/;
function qa(a,b){for(var c=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(b).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;c==0&&g<f;g++){var l=d[g]||"",j=e[g]||"",m=RegExp("(\\d*)(\\D*)","g"),q=RegExp("(\\d*)(\\D*)","g");do{var v=m.exec(l)||["","",""],I=q.exec(j)||["","",""];if(v[0].length==0&&I[0].length==0) {
  break;
}c=ra(v[1].length==0?0:parseInt(v[1],10),I[1].length==0?0:parseInt(I[1],10))||ra(v[2].length==0,I[2].length==0)||ra(v[2],I[2])}while(c==
0)}return c}function ra(a,b){if(a<b) {
  return-1;
} else if(a>b) {
  return 1;
}return 0};var x=Array.prototype,sa=x.indexOf?function(a,b,c){return x.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:c<0?Math.max(0,a.length+c):c;if(ea(a)) {
  return!ea(b)||b.length!=1?-1:a.indexOf(b,c);
}for(;c<a.length;c++) {
  if(c in a&&a[c]===b) {
    return c;
  }
}return-1},ta=x.forEach?function(a,b,c){x.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ea(a)?a.split(""):a,f=0;f<d;f++) {f in e&&b.call(c,e[f],f,a)}};function ua(a){return x.concat.apply(x,arguments)}
function va(a){if(ca(a)) {
  return ua(a);
} else{for(var b=[],c=0,d=a.length;c<d;c++) {b[c]=a[c];}return b}}function wa(a,b,c){return arguments.length<=2?x.slice.call(a,b):x.slice.call(a,b,c)};function y(a,b,c){this.x=r(a)?a:0;this.y=r(b)?b:0;this.b=r(c)?c:0}y.prototype.J=function(){return new y(this.x,this.y,this.b)};y.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.b+")"};y.prototype.Ka=function(){return[this.x,this.y,this.b]};function z(a,b,c){this.x=a;this.y=b;this.b=c}w(z,y);o=z.prototype;o.J=function(){return new z(this.x,this.y,this.b)};o.qa=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.b*this.b)};o.scale=function(a){this.x*=a;this.y*=a;this.b*=a;return this};o.Db=function(){this.x=-this.x;this.y=-this.y;this.b=-this.b;return this};o.normalize=function(){return this.scale(1/this.qa())};o.add=function(a){this.x+=a.x;this.y+=a.y;this.b+=a.b;return this};
o.Ja=function(a){this.x-=a.x;this.y-=a.y;this.b-=a.b;return this};o.oa=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.b==a.b};function xa(a,b){return new z(a.y*b.b-a.b*b.y,a.b*b.x-a.x*b.b,a.x*b.y-a.y*b.x)};var ya=0;var za,Aa,Ba,Ca,Da;function Ea(){return p.navigator?p.navigator.userAgent:k}Ca=Ba=Aa=za=!1;var Fa;if(Fa=Ea()){var Ga=p.navigator;za=Fa.indexOf("Opera")==0;Aa=!za&&Fa.indexOf("MSIE")!=-1;Ba=!za&&Fa.indexOf("WebKit")!=-1;Ca=!za&&!Ba&&Ga.product=="Gecko"}var Ha=za,A=Aa,Ia=Ca,Ja=Ba,Ka,La=p.navigator;Ka=La&&La.platform||"";Da=Ka.indexOf("Mac")!=-1;var Ma=Ka.indexOf("Win")!=-1,Na;
a:{var Oa="",Pa;if(Ha&&p.opera) {
  var Qa=p.opera.version,Oa=typeof Qa=="function"?Qa():Qa;
} else if(Ia?Pa=/rv\:([^\);]+)(\)|;)/:A?Pa=/MSIE\s+([^\);]+)(\)|;)/:Ja&&(Pa=/WebKit\/(\S+)/),Pa) {
  var Ra=Pa.exec(Ea()),Oa=Ra?Ra[1]:"";
}if(A){var Sa,Ta=p.document;Sa=Ta?Ta.documentMode:i;if(Sa>parseFloat(Oa)){Na=String(Sa);break a}}Na=Oa}var Ua={};function Va(a){return Ua[a]||(Ua[a]=qa(Na,a)>=0)}var Wa={};function Xa(){return Wa[9]||(Wa[9]=A&&document.documentMode&&document.documentMode>=9)};function Ya(a,b){for(var c in a)b.call(i,a[c],c,a)}var Za=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];function $a(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Za.length;f++) {c=Za[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}};var ab;!A||Xa();var bb=A&&!Va("8");function cb(){}cb.prototype.Bb=!1;cb.prototype.M=function(){if(!this.Bb){this.Bb=!0,this.C()}};cb.prototype.C=function(){this.wc&&db.apply(k,this.wc)};function db(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];da(d)?db.apply(k,d):d&&typeof d.M=="function"&&d.M()}};function B(a,b){this.type=a;this.currentTarget=this.target=b}w(B,cb);o=B.prototype;o.C=function(){delete this.type;delete this.target;delete this.currentTarget};o.P=!1;o.ga=!0;o.stopPropagation=function(){this.P=!0};o.preventDefault=function(){this.ga=!1};var eb=new Function("a","return a");function fb(a,b){a&&this.z(a,b)}w(fb,B);o=fb.prototype;o.target=k;o.relatedTarget=k;o.offsetX=0;o.offsetY=0;o.clientX=0;o.clientY=0;o.screenX=0;o.screenY=0;o.button=0;o.keyCode=0;o.charCode=0;o.ctrlKey=!1;o.altKey=!1;o.shiftKey=!1;o.metaKey=!1;o.Gc=!1;o.N=k;
o.z=function(a,b){var c=this.type=a.type;B.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Ia){var e;a:{try{eb(d.nodeName);e=!0;break a}catch(f){}e=!1}e||(d=k)}}else if(c=="mouseover"){d=a.fromElement;}else if(c=="mouseout"){d=a.toElement;}this.relatedTarget=d;this.offsetX=a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Gc=Da?a.metaKey:a.ctrlKey;this.state=a.state;this.N=a;delete this.ga;delete this.P};o.stopPropagation=function(){fb.U.stopPropagation.call(this);this.N.stopPropagation?this.N.stopPropagation():this.N.cancelBubble=!0};
o.preventDefault=function(){fb.U.preventDefault.call(this);var a=this.N;if(a.preventDefault){a.preventDefault();}else if(a.returnValue=!1,bb) {
  try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123){a.keyCode=-1}}catch(b){}
}};o.C=function(){fb.U.C.call(this);this.relatedTarget=this.currentTarget=this.target=this.N=k};function gb(){}var hb=0;o=gb.prototype;o.key=0;o.T=!1;o.wb=!1;o.z=function(a,b,c,d,e,f){fa(a)?this.Eb=!0:a&&a.handleEvent&&fa(a.handleEvent)?this.Eb=!1:h(Error("Invalid listener argument"));this.ea=a;this.Wb=b;this.src=c;this.type=d;this.capture=!!e;this.Ea=f;this.wb=!1;this.key=++hb;this.T=!1};o.handleEvent=function(a){return this.Eb?this.ea.call(this.Ea||this.src,a):this.ea.handleEvent.call(this.ea,a)};var ib,jb=(ib="ScriptEngine"in p&&p.ScriptEngine()=="JScript")?p.ScriptEngineMajorVersion()+"."+p.ScriptEngineMinorVersion()+"."+p.ScriptEngineBuildVersion():"0";function C(a,b){this.Gb=b;this.O=[];a>this.Gb&&h(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++) {this.O.push(this.G?this.G():{})}}w(C,cb);C.prototype.G=k;C.prototype.Ab=k;C.prototype.getObject=function(){return this.O.length?this.O.pop():this.G?this.G():{}};function kb(a,b){a.O.length<a.Gb?a.O.push(b):lb(a,b)}function lb(a,b){if(a.Ab){a.Ab(b);}else if(ga(b)) {
  if(fa(b.M)){b.M();} else {for(var c in b)delete b[c]}}
}
C.prototype.C=function(){C.U.C.call(this);for(var a=this.O;a.length;) {lb(this,a.pop());}delete this.O};var mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb;
(function(){function a(){return{i:0,A:0}}function b(){return[]}function c(){function a(b){b=g.call(a.src,a.key,b);if(!b) {
  return b}
}return a}function d(){return new gb}function e(){return new fb}var f=ib&&!(qa(jb,"5.7")>=0),g;rb=function(a){g=a};if(f){mb=function(){return l.getObject()};nb=function(a){kb(l,a)};ob=function(){return j.getObject()};pb=function(a){kb(j,a)};qb=function(){return m.getObject()};sb=function(){kb(m,c())};tb=function(){return q.getObject()};ub=function(a){kb(q,a)};vb=function(){return v.getObject()};
wb=function(a){kb(v,a)};var l=new C(0,600);l.G=a;var j=new C(0,600);j.G=b;var m=new C(0,600);m.G=c;var q=new C(0,600);q.G=d;var v=new C(0,600);v.G=e} else {mb=a,nb=aa,ob=b,pb=aa,qb=c,sb=aa,tb=d,ub=aa,vb=e,wb=aa}})();var xb={},D={},E={},yb={};
function F(a,b,c,d,e){if(b) {
  if(ca(b)){for(var f=0;f<b.length;f++) {F(a,b[f],c,d,e);}return k}else{var d=!!d,g=D;b in g||(g[b]=mb());g=g[b];d in g||(g[d]=mb(),g.i++);var g=g[d],l=ha(a),j;g.A++;if(g[l]){j=g[l];for(f=0;f<j.length;f++) {
    if(g=j[f],g.ea==c&&g.Ea==e){if(g.T) {
      break;
    }return j[f].key}
  }} else {j=g[l]=ob(),g.i++;}f=qb();f.src=a;g=tb();g.z(c,f,a,b,d,e);c=g.key;f.key=c;j.push(g);xb[c]=g;E[l]||(E[l]=ob());E[l].push(g);a.addEventListener?(a==p||!a.zb)&&a.addEventListener(b,f,d):a.attachEvent(b in yb?yb[b]:yb[b]=
  "on"+b,f);return c}
} else {h(Error("Invalid event type"))}}function zb(a,b,c,d,e){if(ca(b)) {
  for(var f=0;f<b.length;f++) {zb(a,b[f],c,d,e);}
} else{d=!!d;a:{f=D;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ha(a),f[a]))){a=f[a];break a}a=k}if(a) {
  for(f=0;f<a.length;f++) {
    if(a[f].ea==c&&a[f].capture==d&&a[f].Ea==e){Ab(a[f].key);break}
  }
}}}
function Ab(a){if(xb[a]){var b=xb[a];if(!b.T){var c=b.src,d=b.type,e=b.Wb,f=b.capture;c.removeEventListener?(c==p||!c.zb)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in yb?yb[d]:yb[d]="on"+d,e);c=ha(c);e=D[d][f][c];if(E[c]){var g=E[c],l=sa(g,b);l>=0&&x.splice.call(g,l,1);g.length==0&&delete E[c]}b.T=!0;e.Jb=!0;Bb(d,f,c,e);delete xb[a]}}}
function Bb(a,b,c,d){if(!d.pa&&d.Jb){for(var e=0,f=0;e<d.length;e++) {
  if(d[e].T){var g=d[e].Wb;g.src=k;sb(g);ub(d[e])} else {e!=f&&(d[f]=d[e]),f++;}
}d.length=f;d.Jb=!1;f==0&&(pb(d),delete D[a][b][c],D[a][b].i--,D[a][b].i==0&&(nb(D[a][b]),delete D[a][b],D[a].i--),D[a].i==0&&(nb(D[a]),delete D[a]))}}
function Cb(a){var b,c=0,d=b==k;b=!!b;if(a==k){Ya(E,function(a){for(var e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture){Ab(f.key),c++}}});}else if(a=ha(a),E[a]) {
  for(var a=E[a],e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture){Ab(f.key),c++}}
}}function Db(a,b,c,d,e){var f=1,b=ha(b);if(a[b]){a.A--;a=a[b];a.pa?a.pa++:a.pa=1;try{for(var g=a.length,l=0;l<g;l++){var j=a[l];j&&!j.T&&(f&=Eb(j,e)!==!1)}}finally{a.pa--,Bb(c,d,b,a)}}return Boolean(f)}
function Eb(a,b){var c=a.handleEvent(b);a.wb&&Ab(a.key);return c}
rb(function(a,b){if(!xb[a]) {
  return!0;
}var c=xb[a],d=c.type,e=D;if(!(d in e)) {
  return!0;
}var e=e[d],f,g;ab===i&&(ab=A&&!p.addEventListener);if(ab){var l;if(!(l=b)) {
  a:{l="window.event".split(".");for(var j=p;f=l.shift();) {
    if(s(j[f])){j=j[f];}else{l=k;break a}
  }l=j}
}f=l;l=!0 in e;j=!1 in e;if(l){if(f.keyCode<0||f.returnValue!=i) {
  return!0;
}a:{var m=!1;if(f.keyCode==0) {
  try{f.keyCode=-1;break a}catch(q){m=!0}
}if(m||f.returnValue==i){f.returnValue=!0}}}m=vb();m.z(f,this);f=!0;try{if(l){for(var v=ob(),I=m.currentTarget;I;I=
I.parentNode) {v.push(I);}g=e[!0];g.A=g.i;for(var V=v.length-1;!m.P&&V>=0&&g.A;V--) {m.currentTarget=v[V],f&=Db(g,v[V],d,!0,m);}if(j){g=e[!1];g.A=g.i;for(V=0;!m.P&&V<v.length&&g.A;V++) {m.currentTarget=v[V],f&=Db(g,v[V],d,!1,m)}}} else {f=Eb(c,m)}}finally{if(v){v.length=0,pb(v);}m.M();wb(m)}return f}d=new fb(b,this);try{f=Eb(c,d)}finally{d.M()}return f});var Fb=0;function Gb(){}w(Gb,cb);o=Gb.prototype;o.zb=!0;o.Ga=k;o.addEventListener=function(a,b,c,d){F(this,a,b,c,d)};o.removeEventListener=function(a,b,c,d){zb(this,a,b,c,d)};
o.dispatchEvent=function(a){var b=a.type||a,c=D;if(b in c){if(ea(a)){a=new B(a,this);}else if(a instanceof B){a.target=a.target||this;}else{var d=a,a=new B(b,this);$a(a,d)}var d=1,e,c=c[b],b=!0 in c,f;if(b){e=[];for(f=this;f;f=f.Ga) {e.push(f);}f=c[!0];f.A=f.i;for(var g=e.length-1;!a.P&&g>=0&&f.A;g--) {a.currentTarget=e[g],d&=Db(f,e[g],a.type,!0,a)&&a.ga!=!1}}if(!1 in c) {
  if(f=c[!1],f.A=f.i,b) {
    for(g=0;!a.P&&g<e.length&&f.A;g++) {a.currentTarget=e[g],d&=Db(f,e[g],a.type,!1,a)&&a.ga!=!1;}
  } else {
    for(e=this;!a.P&&e&&f.A;e=
    e.Ga) {a.currentTarget=e,d&=Db(f,e,a.type,!1,a)&&a.ga!=!1;}
  }
}a=Boolean(d)} else {a=!0;}return a};o.C=function(){Gb.U.C.call(this);Cb(this);this.Ga=k};function G(){this.l="base";this.kc="X"+ya++}w(G,Gb);G.prototype.className=n("l");G.prototype.id=n("kc");G.prototype.print=function(){var a=Object.keys(this),b="",c="<unknown>",d=0;for(d in a){var e="this."+a[d],f=eval(e);e=="this._className"?c=f:b+=e+": "+f+"\n"}a="== X."+c+" ==\n";a+=b;return a};u("X.base",G);u("X.base.prototype.className",G.prototype.className);u("X.base.prototype.id",G.prototype.id);u("X.base.prototype.print",G.prototype.print);function H(a){var b="Unknown error!";s(a)&&(b=a);G.call(this);this.l="exception";this.Oc=b;this.Qc=Error().stack}w(H,G);u("X.exception",H);function J(a,b,c){(!t(a)||a<0||a>1||!t(b)||b<0||b>1||!t(c)||c<0||c>1)&&h(new H("Fatal: Wrong RGB values - must be in range 0..1!"));G.call(this);this.l="color";this.gb=a;this.Qa=b;this.Ma=c}w(J,G);J.prototype.red=n("gb");J.prototype.green=n("Qa");J.prototype.blue=n("Ma");J.prototype.k=function(){var a=Array(3);a[0]=this.gb;a[1]=this.Qa;a[2]=this.Ma;return a};u("X.color",J);u("X.color.prototype.red",J.prototype.red);u("X.color.prototype.green",J.prototype.green);u("X.color.prototype.blue",J.prototype.blue);
u("X.color.prototype.flatten",J.prototype.k);var Hb="StopIteration"in p?p.StopIteration:Error("StopIteration");function Ib(){}Ib.prototype.next=function(){h(Hb)};Ib.prototype.V=function(){return this};function K(a,b){this.r={};this.j=[];var c=arguments.length;if(c>1){c%2&&h(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2) {this.set(arguments[d],arguments[d+1])}}else if(a){var e;if(a instanceof K){Jb(a),e=a.j.concat(),d=a.Da();}else{var c=[],f=0;for(e in a)c[f++]=e;e=c;c=[];f=0;for(d in a)c[f++]=a[d];d=c}for(c=0;c<e.length;c++) {this.set(e[c],d[c])}}}o=K.prototype;o.i=0;o.ia=0;o.Da=function(){Jb(this);for(var a=[],b=0;b<this.j.length;b++) {a.push(this.r[this.j[b]]);}return a};
function Kb(a,b){return Lb(a.r,b)}o.yb=function(a){for(var b=0;b<this.j.length;b++){var c=this.j[b];if(Lb(this.r,c)&&this.r[c]==a) {
  return!0}
}return!1};o.oa=function(a,b){if(this===a) {
  return!0;
}if(this.i!=a.i) {
  return!1;
}var c=b||Mb;Jb(this);for(var d,e=0;d=this.j[e];e++) {
  if(!c(this.get(d),a.get(d))) {
    return!1;
  }
}return!0};function Mb(a,b){return a===b}o.clear=function(){this.r={};this.ia=this.i=this.j.length=0};
o.remove=function(a){return Lb(this.r,a)?(delete this.r[a],this.i--,this.ia++,this.j.length>2*this.i&&Jb(this),!0):!1};function Jb(a){if(a.i!=a.j.length){for(var b=0,c=0;b<a.j.length;){var d=a.j[b];Lb(a.r,d)&&(a.j[c++]=d);b++}a.j.length=c}if(a.i!=a.j.length){for(var e={},c=b=0;b<a.j.length;) {d=a.j[b],Lb(e,d)||(a.j[c++]=d,e[d]=1),b++;}a.j.length=c}}o.get=function(a,b){return Lb(this.r,a)?this.r[a]:b};o.set=function(a,b){Lb(this.r,a)||(this.i++,this.j.push(a),this.ia++);this.r[a]=b};o.J=function(){return new K(this)};
o.V=function(a){Jb(this);var b=0,c=this.j,d=this.r,e=this.ia,f=this,g=new Ib;g.next=function(){for(;;){e!=f.ia&&h(Error("The map has changed since the iterator was created"));b>=c.length&&h(Hb);var g=c[b++];return a?g:d[g]}};return g};function Lb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function L(){G.call(this);this.l="colors";this.n=new K;this.L=-1}w(L,G);o=L.prototype;o.add=function(a){a instanceof Array&&a.length==3&&(a=new J(a[0],a[1],a[2]));(!s(a)||!(a instanceof J))&&h(new H("Fatal: Invalid color."));Kb(this.n,++this.L)&&h(new H("Fatal: Could not get unique id."));this.n.set(this.L,a);return this.L};o.get=function(a){(!s(a)||!Kb(this.n,a))&&h(new H("Fatal: Invalid id."));return this.n.get(a)};
o.remove=function(a){(!s(a)||!(a instanceof J))&&h(new H("Fatal: Invalid color."));if(!this.n.yb(a)) {
  return!1;
}var b=this.n.V(!0);try{for(;;){var c=b.next();if(this.n.get(c)==a) {
  return this.n.remove(c)}
}}catch(d){d!=Hb&&h(d)}};o.Ha=function(a){s(a)||h(new H("Fatal: Invalid id."));return!Kb(this.n,a)?!1:this.n.remove(a)};o.clear=function(){this.n=new K};o.count=function(){return this.n.i};o.k=function(){var a=[],b=this.n.V(!0);try{for(;;)var c=this.n.get(b.next()).k(),a=a.concat(c)}catch(d){d!=Hb&&h(d)}return a};
u("X.colors",L);u("X.colors.prototype.add",L.prototype.add);u("X.colors.prototype.get",L.prototype.get);u("X.colors.prototype.remove",L.prototype.remove);u("X.colors.prototype.removeById",L.prototype.Ha);u("X.colors.prototype.count",L.prototype.count);u("X.colors.prototype.flatten",L.prototype.k);function M(){G.call(this);this.l="points";this.p=new K;this.L=-1}w(M,G);o=M.prototype;o.add=function(a){s(a)||h(new H("Fatal: Invalid point."));ca(a)&&a.length==3&&(a=new y(a[0],a[1],a[2]));a instanceof y||h(new H("Fatal: Invalid point."));Kb(this.p,++this.L)&&h(new H("Fatal: Could not get unique id."));this.p.set(this.L,a);return this.L};o.get=function(a){(!s(a)||!Kb(this.p,a))&&h(new H("Fatal: Invalid id."));return this.p.get(a)};
o.remove=function(a){a instanceof y||h(new H("Fatal: Invalid point."));if(!this.p.yb(a))return!1;var b=this.p.V(!0);try{for(;;){var c=b.next();if(this.p.get(c)==a)return this.p.remove(c)}}catch(d){d!=Hb&&h(d)}};o.Ha=function(a){s(a)||h(new H("Fatal: Invalid id."));return!Kb(this.p,a)?!1:this.p.remove(a)};o.clear=function(){this.p=new K};o.count=function(){return this.p.i};o.k=function(){var a=[],b=this.p.V(!0);try{for(;;)var c=this.p.get(b.next()).Ka(),a=a.concat(c)}catch(d){d!=Hb&&h(d)}return a};
u("X.points",M);u("X.points.prototype.add",M.prototype.add);u("X.points.prototype.get",M.prototype.get);u("X.points.prototype.remove",M.prototype.remove);u("X.points.prototype.removeById",M.prototype.Ha);u("X.points.prototype.count",M.prototype.count);u("X.points.prototype.flatten",M.prototype.k);function Nb(a,b){this.width=a;this.height=b}function Ob(a,b){return a==b?!0:!a||!b?!1:a.width==b.width&&a.height==b.height}Nb.prototype.J=function(){return new Nb(this.width,this.height)};Nb.prototype.toString=function(){return"("+this.width+" x "+this.height+")"};Nb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};Nb.prototype.scale=function(a){this.width*=a;this.height*=a;return this};function N(a,b){if(a instanceof N)this.h=a.Ka();else{var c;if(c=da(a))a:{for(var d=c=0;d<a.length;d++){if(!da(a[d])||c>0&&a[d].length!=c){c=!1;break a}for(var e=0;e<a[d].length;e++)if(!t(a[d][e])){c=!1;break a}if(c==0)c=a[d].length}c=c!=0}c?this.h=va(a):a instanceof Nb?this.h=Pb(a.height,a.width):t(a)&&t(b)&&a>0&&b>0?this.h=Pb(a,b):h(Error("Invalid argument(s) for Matrix contructor"))}this.c=new Nb(this.h[0].length,this.h.length)}
function O(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new N(b)}function Qb(a,b,c){for(var d=0;d<a.c.height;d++) {
  for(var e=0;e<a.c.width;e++) {b.call(c,a.h[d][e],d,e,a)}}
}function Rb(a,b){var c=new N(a.c);Qb(a,function(d,e,f){c.h[e][f]=b.call(i,d,e,f,a)});return c}function Pb(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}o=N.prototype;
o.add=function(a){Ob(this.c,a.c)||h(Error("Matrix summation is only supported on arrays of equal size"));return Rb(this,function(b,c,d){return b+a.h[c][d]})};function Sb(a,b){a.c.height!=b.c.height&&h(Error("The given matrix has height "+b.c.height+", but  needs to have height "+a.c.height+"."));var c=new N(a.c.height,a.c.width+b.c.width);Qb(a,function(a,b,f){c.h[b][f]=a});Qb(b,function(a,b,f){c.h[b][this.c.width+f]=a},a);return c}
o.oa=function(a,b){if(this.c.width!=a.c.width)return!1;if(this.c.height!=a.c.height)return!1;for(var c=b||0,d=0;d<this.c.height;d++)for(var e=0;e<this.c.width;e++)if(!(Math.abs(this.h[d][e]-a.h[d][e])<=(c||1.0E-6)))return!1;return!0};
function Tb(a){a.c.width!=a.c.height&&h(Error("An inverse can only be taken on a square matrix."));var b=O(a.c.height);a:{for(var a=Sb(a,b),c=new N(a),d=0,e=0;e<c.c.height;e++){if(d>=c.c.width)break;for(var f=e;c.h[f][d]==0;)if(f++,f==c.c.height&&(f=e,d++,d==c.c.width)){a=c;break a}var g=a,l=e,j=g.h[f];g.h[f]=g.h[l];g.h[l]=j;f=c.h[e][d];for(g=d;g<c.c.width;g++)c.h[e][g]/=f;for(f=0;f<c.c.height;f++)if(f!=e){l=c.h[f][d];for(g=d;g<c.c.width;g++)c.h[f][g]-=l*c.h[e][g]}d++}a=c}return!Ub(a,0,b.c.width-
1,b.c.height-1).oa(b)?k:Ub(a,b.c.width)}function Vb(a){var b=new N(a.c.width,a.c.height);Qb(a,function(a,d,e){b.h[e][d]=a});return b}function P(a,b,c){return!(b>=0&&b<a.c.height&&c>=0&&c<a.c.width)?k:a.h[b][c]}function Q(a,b,c,d){b>=0&&b<a.c.height&&c>=0&&c<a.c.width||h(Error("Index out of bounds when setting matrix value, ("+b+","+c+") in size ("+a.c.height+","+a.c.width+")"));a.h[b][c]=d}
o.multiply=function(a){if(a instanceof N) {
  return this.c.width!=a.c.height&&h(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.")),Wb(this,a);
} else if(t(a)) {
  return Xb(this,a);
} else {h(Error("A matrix can only be multiplied by a number or another matrix."))}};o.Ja=function(a){Ob(this.c,a.c)||h(Error("Matrix subtraction is only supported on arrays of equal size."));return Rb(this,function(b,c,d){return b-a.h[c][d]})};o.Ka=n("h");
o.toString=function(){var a=0;Qb(this,function(b){b=String(b).length;b>a&&(a=b)});var b=[];ta(this.h,function(c){b.push("[ ");ta(c,function(c){c=String(c);b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};function Ub(a,b,c,d){var e=new N((c?c:a.c.height-1)-0+1,(d?d:a.c.width-1)-b+1);Qb(e,function(a,c,d){e.h[c][d]=this.h[0+c][b+d]},a);return e}
function Wb(a,b){var c=new N(a.c.height,b.c.width);Qb(c,function(a,e,f){for(var g=a=0;g<this.c.width;g++)a+=P(this,e,g)*P(b,g,f);Q(c,e,f,a)},a);return c}function Xb(a,b){return Rb(a,function(a){return a*b})};function R(){G.call(this);this.l="transform";this.o=O(4)}w(R,G);o=R.prototype;o.Ia=function(a){(!t(a)||a<-360||a>360)&&h(new H("Fatal: Invalid angle!"));this.o=this.o.rotate(a*Math.PI/180,new z(0,1,0))};o.Xb=function(a){(!t(a)||a<-360||a>360)&&h(new H("Fatal: Invalid angle!"));this.o=this.o.rotate(a*Math.PI/180,new z(1,0,0))};o.Yb=function(a){(!t(a)||a<-360||a>360)&&h(new H("Fatal: Invalid angle!"));this.o=this.o.rotate(a*Math.PI/180,new z(0,0,1))};
o.bc=function(a){t(a)||h(new H("Fatal: Invalid distance!"));this.o=this.o.translate(new z(a,0,0))};o.cc=function(a){t(a)||h(new H("Fatal: Invalid distance!"));this.o=this.o.translate(new z(0,a,0))};o.dc=function(a){t(a)||h(new H("Fatal: Invalid distance!"));this.o=this.o.translate(new z(0,0,a))};o.Ec=n("o");u("X.transform",R);u("X.transform.prototype.rotateX",R.prototype.Ia);u("X.transform.prototype.rotateY",R.prototype.Xb);u("X.transform.prototype.rotateZ",R.prototype.Yb);
u("X.transform.prototype.translateX",R.prototype.bc);u("X.transform.prototype.translateY",R.prototype.cc);u("X.transform.prototype.translateZ",R.prototype.dc);u("X.transform.prototype.matrix",R.prototype.Ec);function S(a){var b=Yb;if(s(a)&&(a==Zb||a==Yb))b=a;G.call(this);this.l="object";this.rc=b;this.mc=new R;this.Na=k;this.d=new M;this.v=new M;this.B=new L;this.Nc=this.Rc=k;this.$a=1;this.Tc=!0}w(S,G);var Yb="TRIANGLES",Zb="LINES";o=S.prototype;o.type=n("rc");o.transform=n("mc");o.Hc=n("d");o.Fc=n("v");o.uc=n("B");o.color=n("Na");o.$b=function(a){!s(a)&&!(a instanceof J)&&h(new H("Fatal: Invalid color."));this.Na=a};o.opacity=n("$a");
o.ra=function(a){(!t(a)||a>1||a<0)&&h(new H("Fatal: Invalid opacity."));this.$a=a};function $b(a,b){(!s(a)||!s(b)||!(a instanceof S)||!(b instanceof S))&&h(new H("Fatal: Two valid X.objects are required for comparison."));if(a.opacity()<=b.opacity()) {
  return 1;
} else if(a.opacity()>b.opacity()) {
  return-1}
}u("X.object",S);u("X.object.prototype.type",S.prototype.type);u("X.object.prototype.transform",S.prototype.transform);u("X.object.prototype.points",S.prototype.Hc);u("X.object.prototype.normals",S.prototype.Fc);
u("X.object.prototype.colors",S.prototype.uc);u("X.object.prototype.color",S.prototype.color);u("X.object.prototype.setColor",S.prototype.$b);u("X.object.prototype.opacity",S.prototype.opacity);u("X.object.prototype.setOpacity",S.prototype.ra);u("X.object.OPACITY_COMPARATOR",$b);function ac(a,b,c,d,e){(!s(a)||!(a instanceof z))&&h(new H("Fatal: Invalid center for the box!"));(!t(b)||!t(c)||!t(d))&&h(new H("Fatal: Wrong edge lengths for the box!"));S.call(this,e);this.l="box";this.t=a;this.Y=b;this.Z=c;this.$=d;this.e=2*b;this.f=2*c;this.g=2*d;this.sa=this.za=this.ta=this.Aa=this.Ba=this.xa=k;bc(this)}w(ac,S);
function cc(a){var b=new J(1,0,0),c=new J(0,1,0),d=new J(0,0,1),e=new J(1,1,0),f=new J(1,0,1),g=new J(0,1,1);(!s(b)||!(b instanceof J))&&h(new H("Fatal: Wrong color for front side!"));(!s(c)||!(c instanceof J))&&h(new H("Fatal: Wrong color for top side!"));(!s(d)||!(d instanceof J))&&h(new H("Fatal: Wrong color for right side!"));(!s(e)||!(e instanceof J))&&h(new H("Fatal: Wrong color for bottom side!"));(!s(f)||!(f instanceof J))&&h(new H("Fatal: Wrong color for left side!"));(!s(g)||!(g instanceof
J))&&h(new H("Fatal: Wrong color for right side!"));a.xa=b;a.Ba=c;a.Aa=d;a.ta=e;a.za=f;a.sa=g;bc(a)}ac.prototype.Kc=function(a){t(a)||h(new H("Fatal: Wrong spacing value!"));this.Pc=a;bc(this)};
function bc(a){a.d.clear();a.B.clear();var b=new z(a.t.x-a.Y,a.t.y+a.Z,a.t.b+a.$),c=new z(a.t.x+a.Y,a.t.y+a.Z,a.t.b+a.$),d=new z(a.t.x-a.Y,a.t.y-a.Z,a.t.b+a.$),e=new z(a.t.x-a.Y,a.t.y+a.Z,a.t.b-a.$),f=2*a.Y/a.e,g=2*a.Z/a.f,l=2*a.$/a.g,j,m=0;for(j=0;j<f;++j)for(m=0;m<g;++m){a.d.add([e.x+j*a.e,e.y-m*a.f,e.b]);a.d.add([e.x+j*a.e+a.e,e.y-m*a.f,e.b]);a.d.add([e.x+j*a.e,e.y-m*a.f-a.f,e.b]);a.d.add([e.x+j*a.e+a.e,e.y-m*a.f,e.b]);a.d.add([e.x+j*a.e,e.y-m*a.f-a.f,e.b]);a.d.add([e.x+j*a.e+a.e,e.y-m*a.f-a.f,
e.b]);if(a.sa){var q;for(q=0;q<6;++q)a.B.add(a.sa)}for(q=0;q<6;++q)a.v.add([0,0,-1])}for(j=0;j<f;++j)for(m=0;m<l;++m){a.d.add([b.x+j*a.e,b.y,b.b-m*a.g]);a.d.add([b.x+j*a.e+a.e,b.y,b.b-m*a.g]);a.d.add([b.x+j*a.e,b.y,b.b-m*a.g-a.g]);a.d.add([b.x+j*a.e+a.e,b.y,b.b-m*a.g]);a.d.add([b.x+j*a.e,b.y,b.b-m*a.g-a.g]);a.d.add([b.x+j*a.e+a.e,b.y,b.b-m*a.g-a.g]);if(a.Ba)for(e=0;e<6;++e)a.B.add(a.Ba);for(q=0;q<6;++q)a.v.add([0,1,0])}for(j=0;j<g;++j)for(m=0;m<l;++m){a.d.add([c.x,c.y-j*a.f,c.b-m*a.g]);a.d.add([c.x,
c.y-j*a.f-a.f,c.b-m*a.g]);a.d.add([c.x,c.y-j*a.f,c.b-m*a.g-a.g]);a.d.add([c.x,c.y-j*a.f-a.f,c.b-m*a.g]);a.d.add([c.x,c.y-j*a.f,c.b-m*a.g-a.g]);a.d.add([c.x,c.y-j*a.f-a.f,c.b-m*a.g-a.g]);if(a.Aa)for(e=0;e<6;++e)a.B.add(a.Aa);for(q=0;q<6;++q)a.v.add([1,0,0])}for(j=0;j<f;++j)for(m=0;m<l;++m){a.d.add([d.x+j*a.e,d.y,d.b-m*a.g]);a.d.add([d.x+j*a.e+a.e,d.y,d.b-m*a.g]);a.d.add([d.x+j*a.e,d.y,d.b-m*a.g-a.g]);a.d.add([d.x+j*a.e+a.e,d.y,d.b-m*a.g]);a.d.add([d.x+j*a.e,d.y,d.b-m*a.g-a.g]);a.d.add([d.x+j*a.e+a.e,
d.y,d.b-m*a.g-a.g]);if(a.ta)for(c=0;c<6;++c)a.B.add(a.ta);for(q=0;q<6;++q)a.v.add([-1,0,0])}for(j=0;j<g;++j)for(m=0;m<l;++m){a.d.add([b.x,b.y-j*a.f,b.b-m*a.g]);a.d.add([b.x,b.y-j*a.f-a.f,b.b-m*a.g]);a.d.add([b.x,b.y-j*a.f,b.b-m*a.g-a.g]);a.d.add([b.x,b.y-j*a.f-a.f,b.b-m*a.g]);a.d.add([b.x,b.y-j*a.f,b.b-m*a.g-a.g]);a.d.add([b.x,b.y-j*a.f-a.f,b.b-m*a.g-a.g]);if(a.za)for(d=0;d<6;++d)a.B.add(a.za);for(q=0;q<6;++q)a.v.add([0,-1,0])}for(j=0;j<f;++j)for(m=0;m<g;++m){a.d.add([b.x+j*a.e,b.y-m*a.f,b.b]);a.d.add([b.x+
j*a.e+a.e,b.y-m*a.f,b.b]);a.d.add([b.x+j*a.e,b.y-m*a.f-a.f,b.b]);a.d.add([b.x+j*a.e+a.e,b.y-m*a.f,b.b]);a.d.add([b.x+j*a.e,b.y-m*a.f-a.f,b.b]);a.d.add([b.x+j*a.e+a.e,b.y-m*a.f-a.f,b.b]);if(a.xa)for(l=0;l<6;++l)a.B.add(a.xa);for(q=0;q<6;++q)a.v.add([0,0,1])}}u("X.box",ac);u("X.box.prototype.setSpacing",ac.prototype.Kc);function dc(a,b){var c;c=(c=a.className)&&typeof c.split=="function"?c.split(/\s+/):[];var d=wa(arguments,1),e;e=c;for(var f=0,g=0;g<d.length;g++)sa(e,d[g])>=0||(e.push(d[g]),f++);e=f==d.length;a.className=c.join(" ");return e};var ec=!A||Xa();!Ia&&!A||A&&Xa()||Ia&&Va("1.9.1");A&&Va("9");function fc(a,b){this.x=r(a)?a:0;this.y=r(b)?b:0}fc.prototype.J=function(){return new fc(this.x,this.y)};fc.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function gc(a,b){Ya(b,function(b,d){d=="style"?a.style.cssText=b:d=="class"?a.className=b:d=="for"?a.htmlFor=b:d in hc?a.setAttribute(hc[d],b):d.lastIndexOf("aria-",0)==0?a.setAttribute(d,b):a[d]=b})}var hc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function ic(a,b,c){var d=arguments,e=document,f=d[0],g=d[1];if(!ec&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',ka(g.name),'"');if(g.type){f.push(' type="',ka(g.type),'"');var l={};$a(l,g);g=l;delete g.type}f.push(">");f=f.join("")}f=e.createElement(f);if(g)ea(g)?f.className=g:ca(g)?dc.apply(k,[f].concat(g)):gc(f,g);d.length>2&&jc(e,f,d);return f}
function jc(a,b,c){function d(c){c&&b.appendChild(ea(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];da(f)&&!(ga(f)&&f.nodeType>0)?ta(kc(f)?va(f):f,d):d(f)}}function kc(a){if(a&&typeof a.length=="number")if(ga(a))return typeof a.item=="function"||typeof a.item=="string";else if(fa(a))return typeof a.item=="function";return!1};function T(){G.call(this);this.l="console";this.ua=k}w(T,G);T.prototype.Ca=function(){if(!this.ua){var a;(a=(a=document)?a.parentWindow||a.defaultView:window)||h(new H("Fatal: Could not get the window!"));(a=a.console)||h(new H("Fatal: The console is not available!"));this.ua=a}return this.ua};T.prototype.S=function(a){var b=this.Ca();b&&b.log(a)};T.prototype.Cb=function(a){var b=this.Ca();b&&b.error(a)};u("X.console",T);u("X.console.prototype.console_",T.prototype.Ca);
u("X.console.prototype.out",T.prototype.S);u("X.console.prototype.err",T.prototype.Cb);function U(){G.call(this);this.l="shader";var a=this.w="";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute float vertexOpacity;\n";a+="attribute vec4 vertexTransform0,vertexTransform1;\n";a+="attribute vec4 vertexTransform2,vertexTransform3;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform mat3 normal;\n";a+="\n";a+="uniform bool lighting;\n";a+="varying lowp vec4 fragmentColor;\n";a+="varying lowp vec3 lightingWeighting;\n";
a+="\n";a+="void main(void) {\n";a+="  lightingWeighting = vec3(0.0, 0.0, 1.0);\n";a+="  vec3 transformedNormal = normal * vertexNormal;\n";a+="  float dLW = max(dot(transformedNormal, lightingWeighting ), 0.0);\n";a+="  vec4 tPosition;\n";a+="  tPosition.x = dot(vec4(vertexPosition, 1.0),vertexTransform0);\n";a+="  tPosition.y = dot(vec4(vertexPosition, 1.0),vertexTransform1);\n";a+="  tPosition.z = dot(vec4(vertexPosition, 1.0),vertexTransform2);\n";a+="  tPosition.w = dot(vec4(vertexPosition, 1.0),vertexTransform3);\n";
a+="  gl_Position = perspective * view * tPosition;\n";a+="  fragmentColor = vec4(vertexColor*dLW,vertexOpacity);\n";a+="}\n";this.w=a;a=this.wa="";a+="varying lowp vec4 fragmentColor;\n";a+="\n";a+="void main(void) {\n";a+="  gl_FragColor = fragmentColor;\n";a+="}\n";this.wa=a;this.fb="vertexPosition";this.Va="vertexNormal";this.Oa="vertexColor";this.ab="vertexOpacity";this.nc="vertexTransform0";this.oc="vertexTransform1";this.pc="vertexTransform2";this.qc="vertexTransform3";this.u="lighting";this.tb=
"view";this.cb="perspective";this.Ya="normal"}w(U,G);o=U.prototype;o.Mc=n("w");o.zc=n("wa");o.position=n("fb");o.color=n("Oa");o.view=n("tb");o.fa=n("cb");o.opacity=n("ab");
o.ec=function(){var a=31337,a=this.w.search(this.fb);a==-1&&h(new H("Fatal: Could not validate shader! The positionAttribute was bogus."));a=this.w.search(this.Va);a==-1&&h(new H("Fatal: Could not validate shader! The normalAttribute was bogus."));a=this.w.search(this.Oa);a==-1&&h(new H("Fatal: Could not validate shader! The colorAttribute was bogus."));a=this.w.search(this.ab);a==-1&&h(new H("Fatal: Could not validate shader! The opacityAttribute was bogus."));a=this.w.search(this.cb);a==-1&&h(new H("Fatal: Could not validate shader! The perspectiveUniform was bogus."));
a=this.w.search(this.tb);a==-1&&h(new H("Fatal: Could not validate shader! The viewUniform was bogus."));a=this.w.search(this.Ya);a==-1&&h(new H("Fatal: Could not validate shader! The normalUniform was bogus."));a=this.w.search(this.u);a==-1&&h(new H("Fatal: Could not validate shader! The lighting was bogus."));return!0};u("X.shaders",U);u("X.shaders.prototype.vertex",U.prototype.Mc);u("X.shaders.prototype.fragment",U.prototype.zc);u("X.shaders.prototype.position",U.prototype.position);
u("X.shaders.prototype.color",U.prototype.color);u("X.shaders.prototype.view",U.prototype.view);u("X.shaders.prototype.perspective",U.prototype.fa);u("X.shaders.prototype.opacity",U.prototype.opacity);u("X.shaders.prototype.validate",U.prototype.ec);function lc(a,b){this.x=a;this.y=b}w(lc,fc);o=lc.prototype;o.J=function(){return new lc(this.x,this.y)};o.qa=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};o.scale=function(a){this.x*=a;this.y*=a;return this};o.Db=function(){this.x=-this.x;this.y=-this.y;return this};o.normalize=function(){return this.scale(1/this.qa())};o.add=function(a){this.x+=a.x;this.y+=a.y;return this};o.Ja=function(a){this.x-=a.x;this.y-=a.y;return this};
o.oa=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};N.prototype.k=function(){var a=[],b=this.c;if(b.height==0||b.width==0)return[];var c,d;for(d=0;d<b.height;d++)for(c=0;c<b.width;c++)a.push(P(this,c,d));return a};N.prototype.translate=function(a){this.c.width!=this.c.height&&h(new H("Fatal: Can not translate non-square matrix!"));var b=this.c,c=O(b.height);a instanceof lc&&b.height==3?(Q(c,0,2,a.x),Q(c,1,2,a.y)):a instanceof z&&b.height==4?(Q(c,0,3,a.x),Q(c,1,3,a.y),Q(c,2,3,a.b)):h(new H("Fatal: Translation failed!"));return this.multiply(c)};
N.prototype.rotate=function(a,b){(this.c.height!=4||this.c.width!=this.c.height)&&h(new H("Fatal: Only 4x4 matrices can be rotated!"));(!s(b)||!(b instanceof z))&&h(new H("Fatal: Invalid axis vector!"));t(a)||h(new H("Fatal: Invalid angle!"));var b=b.normalize(),c=Math.cos(a),d=Math.sin(a),e=new O(4);Q(e,0,0,c+b.x*b.x*(1-c));Q(e,0,1,b.x*b.y*(1-c)-b.b*d);Q(e,0,2,b.x*b.b*(1-c)+b.y*d);Q(e,1,0,b.y*b.x*(1-c)+b.b*d);Q(e,1,1,c+b.y*b.y*(1-c));Q(e,1,2,b.y*b.b*(1-c)-b.x*d);Q(e,2,0,b.b*b.x*(1-c)-b.y*d);Q(e,
2,1,b.b*b.y*(1-c)+b.x*d);Q(e,2,2,c+b.b*b.b*(1-c));return this.multiply(e)};function mc(a){this.da=a||nc}function nc(a,b){if(String(a)<String(b))return-1;else if(String(a)>String(b))return 1;return 0}o=mc.prototype;o.s=k;o.da=k;o.I=k;o.H=k;o.i=0;
o.add=function(a){if(this.s==k)return this.H=this.I=this.s=new oc(a),this.i=1,!0;var b=!1;pc(this,function(c){var d=k;if(this.da(c.value,a)>0){if(d=c.left,c.left==k){var e=new oc(a,c);c.left=e;if(c==this.I)this.I=e;b=!0;qc(this,c)}}else if(this.da(c.value,a)<0&&(d=c.right,c.right==k)){e=new oc(a,c);c.right=e;if(c==this.H)this.H=e;b=!0;qc(this,c)}return d});b&&(this.i+=1);return b};
o.remove=function(a){var b=k;pc(this,function(c){var d=k;if(this.da(c.value,a)>0)d=c.left;else if(this.da(c.value,a)<0)d=c.right;else if(b=c.value,c.left!=k||c.right!=k){var e=k,f;if(c.left!=k){f=rc(this,c.left);if(f!=c.left){if(f.parent.right=f.left)f.left.parent=f.parent;f.left=c.left;f.left.parent=f;e=f.parent}f.parent=c.parent;f.right=c.right;if(f.right)f.right.parent=f;if(c==this.H)this.H=f}else{f=sc(this,c.right);if(f!=c.right){if(f.parent.left=f.right)f.right.parent=f.parent;f.right=c.right;
f.right.parent=f;e=f.parent}f.parent=c.parent;f.left=c.left;if(f.left)f.left.parent=f;if(c==this.I)this.I=f}tc(c)?c.parent.left=f:uc(c)?c.parent.right=f:this.s=f;qc(this,e?e:f)}else if(tc(c)){this.Vc=1;c.parent.left=k;if(c==this.I)this.I=c.parent;qc(this,c.parent)}else if(uc(c)){c.parent.right=k;if(c==this.H)this.H=c.parent;qc(this,c.parent)}else this.clear();return d});if(b)this.i=this.s?this.i-1:0;return b};o.clear=function(){this.H=this.I=this.s=k;this.i=0};
o.Da=function(){var a=[];vc(this,function(b){a.push(b)});return a};function vc(a,b){if(a.s){var c,d=c=sc(a);for(c=c.left?c.left:c;d!=k;)if(d.left!=k&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=d.right!=k&&d.right!=c?d.right:d.parent;c=e}}}function pc(a,b,c){for(c=c?c:a.s;c&&c!=k;) {c=b.call(a,c)}}
function qc(a,b){pc(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;b-e>1?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&wc(this,a.left),xc(this,a)):e-b>1&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&xc(this,a.right),wc(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function wc(a,b){tc(b)?(b.parent.left=b.right,b.right.parent=b.parent):uc(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.s=b.right,a.s.parent=k);var c=b.right;b.right=b.right.left;if(b.right!=k)b.right.parent=b;c.left=b;b.parent=c}function xc(a,b){tc(b)?(b.parent.left=b.left,b.left.parent=b.parent):uc(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.s=b.left,a.s.parent=k);var c=b.left;b.left=b.left.right;if(b.left!=k)b.left.parent=b;c.right=b;b.parent=c}
function sc(a,b){if(!b)return a.I;var c=b;pc(a,function(a){var b=k;if(a.left)b=c=a.left;return b},b);return c}function rc(a,b){if(!b)return a.H;var c=b;pc(a,function(a){var b=k;if(a.right)b=c=a.right;return b},b);return c}function oc(a,b){this.value=a;this.parent=b?b:k}oc.prototype.left=k;oc.prototype.right=k;oc.prototype.height=1;function uc(a){return!!a.parent&&a.parent.right==a}function tc(a){return!!a.parent&&a.parent.left==a};function W(a,b,c){s(a)||h(new H("Fatal: Invalid GL Buffer!"));s(b)||h(new H("Fatal: Invalid number of items!"));s(c)||h(new H("Fatal: Invalid item size!"));G.call(this);this.l="buffer";this.D=a;this.Ta=b;this.F=c}w(W,G);W.prototype.Ac=n("D");W.prototype.Cc=n("Ta");W.prototype.Dc=n("F");u("X.buffer",W);u("X.buffer.prototype.glBuffer",W.prototype.Ac);u("X.buffer.prototype.itemCount",W.prototype.Cc);u("X.buffer.prototype.itemSize",W.prototype.Dc);function yc(a){B.call(this,a)}w(yc,B);u("X.event",yc);u("X.event.uniqueId",function(a){return a+"_"+Fb++});function Y(a,b){(!t(a)||!t(b))&&h(new H("Fatal: A camera needs valid width and height values."));G.call(this);this.l="camera";this.ic=45;this.eb=new z(0,0,100);this.jc=new z(0,0,0);this.sc=new z(0,1,0);var c=a/b,d=1*Math.tan(this.ic*Math.PI/360),e=-d;this.lc=new N([[2/(d*c-e*c),0,(d*c+e*c)/(d*c-e*c),0],[0,2/(d-e),(d+e)/(d-e),0],[0,0,-10001/9999,-2.000200020002],[0,0,-1,0]]);d=this.eb;e=this.jc;(!(d instanceof z)||!(e instanceof z))&&h(new H("Fatal: 3D vectors required for calculating the view."));
var c=O(4),e=new z(d.x-e.x,d.y-e.y,d.b-e.b),e=e.normalize(),f=this.sc.J(),g=xa(f,e),f=xa(e,g),g=g.normalize(),f=f.normalize();Q(c,0,0,g.x);Q(c,0,1,g.y);Q(c,0,2,g.b);Q(c,0,3,0);Q(c,1,0,f.x);Q(c,1,1,f.y);Q(c,1,2,f.b);Q(c,1,3,0);Q(c,2,0,e.x);Q(c,2,1,e.y);Q(c,2,2,e.b);Q(c,2,3,0);Q(c,3,0,0);Q(c,3,1,0);Q(c,3,2,0);Q(c,3,3,1);d=d.J();this.m=c.translate(d.Db())}w(Y,G);var zc="pan_"+Fb++,Ac="rotate_"+Fb++,Bc="zoom_"+Fb++;o=Y.prototype;
o.Fa=function(a){(!s(a)||!(a instanceof Z))&&h(new H("Fatal: Could not observe the interactor."));F(a,zc,this.Sb.bind(this));F(a,Ac,this.Tb.bind(this));F(a,Bc,this.Ub.bind(this))};o.Ub=function(a){a instanceof Cc||h(new H("Fatal: Received no valid zoom event!"));a.ya?this.fc(a.ka):this.gc(a.ka)};o.Sb=function(a){a instanceof Dc||h(new H("Fatal: Received no valid pan event!"));this.Vb(a.W)};o.Tb=function(a){a instanceof Ec||h(new H("Fatal: Received no valid rotate event!"));this.rotate(a.W)};
o.fa=n("lc");o.view=n("m");o.position=n("eb");o.Vb=function(a){a instanceof lc||h(new H("Fatal: Invalid distance vector for pan operation."));a=new z(-a.x,a.y,0);this.m=O(4).translate(a).multiply(this.m);this.dispatchEvent(new Fc)};
o.rotate=function(a){a instanceof lc||h(new H("Fatal: Invalid distance vector for rotate operation."));var b=-a.x/5*Math.PI/180,a=-a.y/5*Math.PI/180,c=O(4),d=new z(P(this.m,0,0),P(this.m,0,1),P(this.m,0,2)),b=c.rotate(b,new z(P(this.m,1,0),P(this.m,1,1),P(this.m,1,2)));this.m=this.m.multiply(c.rotate(a,d).multiply(b));this.dispatchEvent(new Fc)};o.fc=function(a){var b=30;s(a)&&!a&&(b=1);a=new z(0,0,b);this.m=O(4).translate(a).multiply(this.m);this.dispatchEvent(new Fc)};
o.gc=function(a){var b=30;s(a)&&!a&&(b=1);a=new z(0,0,-b);this.m=O(4).translate(a).multiply(this.m);this.dispatchEvent(new Fc)};function Dc(){B.call(this,zc);this.W=k}w(Dc,yc);function Ec(){B.call(this,Ac);this.W=k;this.hc=0}w(Ec,yc);function Cc(){B.call(this,Bc);this.ka=this.ya=!1}w(Cc,yc);u("X.camera",Y);u("X.camera.prototype.observe",Y.prototype.Fa);u("X.camera.prototype.onZoom",Y.prototype.Ub);u("X.camera.prototype.onPan",Y.prototype.Sb);u("X.camera.prototype.onRotate",Y.prototype.Tb);
u("X.camera.prototype.perspective",Y.prototype.fa);u("X.camera.prototype.view",Y.prototype.view);u("X.camera.prototype.position",Y.prototype.position);u("X.camera.prototype.pan",Y.prototype.Vb);u("X.camera.prototype.rotate",Y.prototype.rotate);u("X.camera.prototype.zoomIn",Y.prototype.fc);u("X.camera.prototype.zoomOut",Y.prototype.gc);u("X.camera.prototype.observe",Y.prototype.Fa);u("X.camera.PanEvent",Dc);u("X.camera.RotateEvent",Ec);u("X.camera.ZoomEvent",Cc);function Gc(a){this.yc=a;this.Fb=F(this.yc,Ia?"DOMMouseScroll":"mousewheel",this)}w(Gc,Gb);
Gc.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.N;if(a.type=="mousewheel"){c=1;if(A||Ja&&(Ma||Va("532.0")))c=40;d=Ja&&Da&&-a.wheelDelta%c!=0?-a.wheelDelta:-a.wheelDelta/c;r(a.wheelDeltaX)?(b=Ja&&Da&&-a.wheelDeltaX%c!=0?-a.wheelDeltaX:-a.wheelDeltaX/c,c=Ja&&Da&&-a.wheelDeltaY%c!=0?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,d>100?d=3:d<-100&&(d=-3),r(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;t(this.Hb)&&(b=Math.min(Math.max(b,-this.Hb),this.Hb));t(this.Ib)&&(c=Math.min(Math.max(c,
-this.Ib),this.Ib));b=new Hc(d,a,b,c);try{this.dispatchEvent(b)}finally{b.M()}};Gc.prototype.C=function(){Gc.U.C.call(this);Ab(this.Fb);delete this.Fb};function Hc(a,b,c,d){b&&this.z(b,i);this.type="mousewheel";this.detail=a;this.Uc=c;this.vc=d}w(Hc,fb);function Z(a){(!s(a)||!(a instanceof Element))&&h(new H("Fatal: Could not add interactor to the given element."));G.call(this);this.l="interactor";this.R=a;this.Ua=k;this.na=this.ma=this.X=!1;this.la=new lc(0,0)}w(Z,G);o=Z.prototype;o.Mb=function(){this.Ua=new Gc(this.R);F(this.Ua,"mousewheel",this.Rb.bind(this))};o.Kb=function(){F(this.R,"mousedown",this.Nb.bind(this));F(this.R,"mouseup",this.Qb.bind(this));this.R.oncontextmenu=function(){return!1}};
o.Lb=function(){F(this.R,"mousemove",this.Ob.bind(this));F(this.R,"mouseout",this.Pb.bind(this))};o.Nb=function(a){if(a.button==0)this.X=!0;else if(a.button==1)this.ma=!0;else if(a.button==2)this.na=!0;a.preventDefault()};o.Qb=function(a){if(a.button==0)this.X=!1;else if(a.button==1)this.ma=!1;else if(a.button==2)this.na=!1;a.preventDefault()};o.Pb=function(a){this.na=this.ma=this.X=!1;this.la.x=0;this.la.y=0;a.preventDefault()};
o.Ob=function(a){this.dispatchEvent("mouseup");a.preventDefault();var b=a.shiftKey,c=new lc(a.clientX,a.clientY),a=this.la.Ja(c);this.la=c.J();if(Math.abs(a.x)<2)a.x=0;if(Math.abs(a.y)<2)a.y=0;if(a.qa()!=0) {
  if(this.X&&!b){b=new Ec,b.W=a,b.hc=0,this.dispatchEvent(b);}else if(this.ma||this.X&&b){b=new Dc,b.W=a,this.dispatchEvent(b);}else if(this.na){b=new Cc,b.ya=a.y<0,b.ka=!1,this.dispatchEvent(b)}}
};o.Rb=function(a){a.preventDefault();var b=new Cc;b.ya=a.vc>0;b.ka=!0;this.dispatchEvent(b)};
u("X.interactor",Z);u("X.interactor.prototype.observeMouseWheel",Z.prototype.Mb);u("X.interactor.prototype.observeMouseClicks",Z.prototype.Kb);u("X.interactor.prototype.observeMouseMovement",Z.prototype.Lb);u("X.interactor.prototype.onMouseDown",Z.prototype.Nb);u("X.interactor.prototype.onMouseUp",Z.prototype.Qb);u("X.interactor.prototype.onMouseMovementOutside",Z.prototype.Pb);u("X.interactor.prototype.onMouseMovementInside",Z.prototype.Ob);u("X.interactor.prototype.onMouseWheel",Z.prototype.Rb);function $(a,b){if(!(this instanceof Ic)&&!(this instanceof Jc)){var c="";c+="Fatal: X.renderer should not be instantiated directly.";c+="Use X.renderer2D or X.renderer3D instead.";h(new H(c))}(!t(a)||!t(b))&&h(new H("Fatal: Invalid width or height for the renderer."));G.call(this);this.l="renderer";this.va=-1;this.ub=a;this.Ra=b;this.La="#000000";this.Sa=this.K=this.aa=this.ba=this.a=this.q=this.ja=k;this.Za=new mc($b);this.lb=new K;this.Wa=new K;this.Pa=new K;this.hb=new K;this.ib=new K;this.jb=
new K;this.kb=new K;this.bb=new K;this.u=!0}w($,G);var Kc="render_"+Fb++;function Fc(){B.call(this,Kc);this.Sc=Date.now()}w(Fc,yc);o=$.prototype;o.xc=n("va");o.width=n("ub");o.Lc=function(a){this.q&&this.q.style.setProperty("width",a.toString());this.ub=a};o.height=n("Ra");o.Jc=function(a){this.q&&this.q.style.setProperty("height",a.toString());this.Ra=a};o.backgroundColor=n("La");o.Zb=function(a){this.q&&this.q.style.setProperty("background-color",a.toString());this.La=a};
o.canvas=function(){s(this.q)||h(new H("Fatal: No valid canvas for this renderer!"));return this.q};o.xb=function(){if(!this.ja){var a=document.body;a||h(new H("Fatal: Could not find <body></body>!"));this.ja=a}return this.ja};o.ac=function(a){a||h(new H("Fatal: Could not find container!"));this.ja=a};o.ha=function(a){this.ac(ea(a)?document.getElementById(a):a)};o.tc=n("K");o.Bc=n("Sa");
o.z=function(){if(!s(this.q)){var a=ic("canvas");a.style.setProperty("background-color",this.backgroundColor().toString());a.width=this.width();a.height=this.height();this.xb().appendChild(a);try{var b=a.getContext("experimental-webgl")}catch(c){h(new H("Fatal: Exception while getting GL Context!\n"+c))}b||h(new H("Fatal: WebGL not supported!"));try{b.viewport(0,0,this.width(),this.height()),b.clearColor(0,0,0,0),b.enable(b.BLEND),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA),b.disable(b.DEPTH_TEST),
b.depthFunc(b.LEQUAL),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)}catch(d){h(new H("Fatal: Exception while accessing GL Context!\n"+d))}var e=new Z(a);e.Mb();e.Kb();e.Lb();var f=new Y(this.width(),this.height());f.Fa(e);F(f,Kc,this.Q.bind(this));this.q=a;this.a=b;this.a.enable(b.DEPTH_TEST);this.K=f;this.Sa=e;this.vb(new U)}};
o.vb=function(a){(!s(this.q)||!s(this.a)||!s(this.K))&&h(new H("Fatal: Renderer was not initialized properly!"));(!s(a)||!(a instanceof U))&&h(new H("Fatal: Could not add shaders!"));a.ec();var b=this.a.createShader(this.a.FRAGMENT_SHADER),c=this.a.createShader(this.a.VERTEX_SHADER);this.a.shaderSource(b,a.wa);this.a.shaderSource(c,a.w);this.a.compileShader(b);this.a.compileShader(c);this.a.getShaderParameter(b,this.a.COMPILE_STATUS)||h(new H("Fatal: Fragement Shader compilation failed!\n"+this.a.getShaderInfoLog(b)));
this.a.getShaderParameter(c,this.a.COMPILE_STATUS)||h(new H("Fatal: Vertex Shader compilation failed!\n"+this.a.getShaderInfoLog(c)));var d=this.a.createProgram();this.a.attachShader(d,c);this.a.attachShader(d,b);this.a.linkProgram(d);this.a.getProgramParameter(d,this.a.LINK_STATUS)||h(new H("Fatal: Could not create shader program!"));this.a.useProgram(d);this.ob=this.a.getAttribLocation(d,a.position());this.a.enableVertexAttribArray(this.ob);this.Xa=this.a.getAttribLocation(d,a.Va);this.a.enableVertexAttribArray(this.Xa);
this.mb=this.a.getAttribLocation(d,a.color());this.a.enableVertexAttribArray(this.mb);this.nb=this.a.getAttribLocation(d,a.opacity());this.a.enableVertexAttribArray(this.nb);this.pb=this.a.getAttribLocation(d,a.nc);this.a.enableVertexAttribArray(this.pb);this.qb=this.a.getAttribLocation(d,a.oc);this.a.enableVertexAttribArray(this.qb);this.rb=this.a.getAttribLocation(d,a.pc);this.a.enableVertexAttribArray(this.rb);this.sb=this.a.getAttribLocation(d,a.qc);this.a.enableVertexAttribArray(this.sb);this.aa=
d;this.ba=a};
o.ca=function(a){(!s(this.q)||!s(this.a)||!s(this.K))&&h(new H("Fatal: Renderer was not initialized properly!"));(!s(a)||!(a instanceof S))&&h(new H("Fatal: Illegal object!"));var b=!1,c=new J(1,1,1),d=k;a.color()===k?(b=a.d.count()==a.B.count(),d=a.B):c=a.color();if(!b){d=new L;for(b=0;b<a.d.count();b++)d.add(c)}c=this.a.createBuffer();this.a.bindBuffer(this.a.ARRAY_BUFFER,c);this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(a.d.k()),this.a.STATIC_DRAW);c=new W(c,a.d.count(),3);b=this.a.createBuffer();
this.a.bindBuffer(this.a.ARRAY_BUFFER,b);this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(a.v.k()),this.a.STATIC_DRAW);var b=new W(b,a.v.count(),3),e=this.a.createBuffer();this.a.bindBuffer(this.a.ARRAY_BUFFER,e);this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(d.k()),this.a.STATIC_DRAW);var e=new W(e,d.count(),3),f=this.a.createBuffer(),g=Array(a.d.k().length),l;for(l=0;l<g.length;++l)g[l]=a.opacity();this.a.bindBuffer(this.a.ARRAY_BUFFER,f);this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(g),
this.a.STATIC_DRAW);var f=new W(f,1,1),j=a.transform().o,m=this.a.createBuffer(),g=Array(a.d.k().length*4);for(l=0;l<g.length;l+=4)g[l]=P(j,0,0),g[l+1]=P(j,0,1),g[l+2]=P(j,0,2),g[l+3]=P(j,0,3);this.a.bindBuffer(this.a.ARRAY_BUFFER,m);this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(g),this.a.STATIC_DRAW);var m=new W(m,d.count(),4),q=this.a.createBuffer(),g=Array(a.d.k().length*4);for(l=0;l<g.length;l+=4)g[l]=P(j,1,0),g[l+1]=P(j,1,1),g[l+2]=P(j,1,2),g[l+3]=P(j,1,3);this.a.bindBuffer(this.a.ARRAY_BUFFER,
q);this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(g),this.a.STATIC_DRAW);var q=new W(q,d.count(),4),v=this.a.createBuffer(),g=Array(a.d.k().length*4);for(l=0;l<g.length;l+=4)g[l]=P(j,2,0),g[l+1]=P(j,2,1),g[l+2]=P(j,2,2),g[l+3]=P(j,2,3);this.a.bindBuffer(this.a.ARRAY_BUFFER,v);this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(g),this.a.STATIC_DRAW);var v=new W(v,d.count(),4),I=this.a.createBuffer(),g=Array(a.d.k().length*4);for(l=0;l<g.length;l+=4)g[l]=P(j,3,0),g[l+1]=P(j,3,1),g[l+2]=
P(j,3,2),g[l+3]=P(j,3,3);this.a.bindBuffer(this.a.ARRAY_BUFFER,I);this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(g),this.a.STATIC_DRAW);d=new W(I,d.count(),4);this.Za.add(a)||h(new H("Fatal: Could not add object to this renderer."));this.lb.set(a.id(),c);this.Wa.set(a.id(),b);this.Pa.set(a.id(),e);this.bb.set(a.id(),f);this.hb.set(a.id(),m);this.ib.set(a.id(),q);this.jb.set(a.id(),v);this.kb.set(a.id(),d)};
o.Q=function(){(!this.q||!this.a||!this.K)&&h(new H("Fatal: The renderer was not initialized properly!"));this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);var a=this.K.fa(),b=this.K.view();this.a.uniformMatrix4fv(this.a.getUniformLocation(this.aa,this.ba.fa()),!1,new Float32Array(a.k()));this.a.uniformMatrix4fv(this.a.getUniformLocation(this.aa,this.ba.view()),!1,new Float32Array(b.k()));var a=this.a.getUniformLocation(this.aa,this.ba.Ya),c=O(3);Q(c,0,0,P(b,0,0));Q(c,0,1,P(b,0,1));Q(c,
0,2,P(b,0,2));Q(c,1,0,P(b,1,0));Q(c,1,1,P(b,1,1));Q(c,1,2,P(b,1,2));Q(c,2,0,P(b,2,0));Q(c,2,1,P(b,2,1));Q(c,2,2,P(b,2,2));this.a.uniformMatrix3fv(a,!1,new Float32Array(Vb(Tb(c)).k()));this.a.uniform1i(this.a.getUniformLocation(this.aa,this.ba.u),this.u);b=this.Za.Da();a=b.length;for(c=0;c<a;++c){var d=b[c];if(d){var e=d.id(),f=this.lb.get(e),g=this.Wa.get(e),l=this.Pa.get(e),j=this.bb.get(e),m=this.hb.get(e),q=this.ib.get(e),v=this.jb.get(e),e=this.kb.get(e);this.a.bindBuffer(this.a.ARRAY_BUFFER,
f.D);this.a.vertexAttribPointer(this.ob,f.F,this.a.FLOAT,!1,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,g.D);this.a.vertexAttribPointer(this.Xa,g.F,this.a.FLOAT,!1,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,l.D);this.a.vertexAttribPointer(this.mb,l.F,this.a.FLOAT,!1,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,j.D);this.a.vertexAttribPointer(this.nb,j.F,this.a.FLOAT,!1,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,m.D);this.a.vertexAttribPointer(this.pb,m.F,this.a.FLOAT,!1,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,
q.D);this.a.vertexAttribPointer(this.qb,q.F,this.a.FLOAT,!1,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,v.D);this.a.vertexAttribPointer(this.rb,v.F,this.a.FLOAT,!1,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,e.D);this.a.vertexAttribPointer(this.sb,e.F,this.a.FLOAT,!1,0,0);g=-1;if(d.type()==Yb)g=this.a.TRIANGLES;else if(d.type()==Zb)g=this.a.LINES;this.a.drawArrays(g,0,f.Ta)}else h(new H("Fatal: Could not retrieve object for (re-)drawing!"))}};u("X.renderer",$);u("X.renderer.prototype.dimension",$.prototype.xc);
u("X.renderer.prototype.width",$.prototype.width);u("X.renderer.prototype.setWidth",$.prototype.Lc);u("X.renderer.prototype.height",$.prototype.height);u("X.renderer.prototype.setHeight",$.prototype.Jc);u("X.renderer.prototype.backgroundColor",$.prototype.backgroundColor);u("X.renderer.prototype.setBackgroundColor",$.prototype.Zb);u("X.renderer.prototype.canvas",$.prototype.canvas);u("X.renderer.prototype.container",$.prototype.xb);u("X.renderer.prototype.setContainer",$.prototype.ac);
u("X.renderer.prototype.setContainerById",$.prototype.ha);u("X.renderer.prototype.camera",$.prototype.tc);u("X.renderer.prototype.interactor",$.prototype.Bc);u("X.renderer.prototype.init",$.prototype.z);u("X.renderer.prototype.addShaders",$.prototype.vb);u("X.renderer.prototype.addObject",$.prototype.ca);u("X.renderer.prototype.render",$.prototype.Q);u("X.renderer.RenderEvent",Fc);function Ic(a,b){$.call(this,a,b);this.l="renderer2D";this.va=2}w(Ic,$);u("X.renderer2D",Ic);function Jc(a,b){$.call(this,a,b);this.l="renderer3D";this.va=3}w(Jc,$);u("X.renderer3D",Jc);var Lc={Ic:function(){var a=new T;a.S("Starting sampleApp.init..");try{var b=document.getElementById("lighting").checked,c=new Ic(300,300);c.ha("sliceView1");c.z();c.u=b;var d=new Ic(300,300);d.ha("sliceView2");d.z();d.u=b;var e=new Ic(300,300);e.ha("sliceView3");e.z();e.u=b;var f=new Jc(912,400);f.ha("threeDView");f.Zb("#b3b3e7");f.z();f.u=b;var g=new ac(new z(10,10,10),5,10,20);cc(g);g.ra(0.5);var l=new ac(new z(-10,-10,-10),5,5,5);l.$b(new J(0,0,1));l.ra(0.6);l.transform().bc(-50);l.transform().cc(30);
l.transform().dc(-30);l.transform().Ia(45);var j=new ac(new z(0,0,0),3,3,3);cc(j);j.transform().Ia(30);j.transform().Xb(30);j.transform().Yb(30);j.ra(0.7);f.ca(g);f.ca(l);f.ca(j);b=document.getElementById("lighting").checked;c.u=b;c.Q();d.u=b;d.Q();e.u=b;e.Q();f.u=b;f.Q();a.S(c.print());a.S(d.print());a.S(e.print());a.S(f.print());var m=function(a){var a=a.target.result.split("\n"),b=new S,c;for(c=0;c<a.length;c++){var d=a[c].split(" ");if(d[3]=="vertex"){var e=d[4],g=d[5],d=d[6];b.d.add([e,g,d])}else d[1]==
"facet"&&(e=d[3],g=d[4],d=d[5],b.v.add([e,g,d]),b.v.add([e,g,d]),b.v.add([e,g,d]))}f.ca(b);f.Q()},q=document.getElementById("threeDView");q.addEventListener("dragover",function(a){a.stopPropagation();a.preventDefault()},!1);q.addEventListener("drop",function(a){a.stopPropagation();a.preventDefault();var a=a.dataTransfer.files,b,c=0;for(b=0;c=a[b];b++){var d=new FileReader;d.onloadend=m;d.readAsText(c)}},!1)}catch(v){v instanceof H&&a.Cb(v.print())}}};u("sampleApp",Lc);u("sampleApp.run",Lc.Ic);
